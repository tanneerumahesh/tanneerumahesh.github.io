<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Tags - Mahesh's Tech Helpers</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Mahesh's Tech Helpers" property="og:site_name">
  
    <meta content="Tags" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Sharing is caring :) 
" property="og:description">
  
  
    <meta content="/tags/" property="og:url">
  
  
  
    <meta content="/assets/img/mahesh.jpg" property="og:image">
  
  
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@https://twitter.com/mtanneeru17">
  
    <meta name="twitter:title" content="Tags">
  
  
    <meta name="twitter:url" content="/tags/">
  
  
    <meta name="twitter:description" content="Sharing is caring :) 
">
  
  
    <meta name="twitter:image:src" content="/assets/img/mahesh.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/favicon1.png ">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/favicon2.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/favicon2.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
  <link rel="stylesheet" href="/assets/css/main.css">
  
   
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/mahesh.jpg" alt="MAHESH TANNEERU"></a>
      </div>
      <div class="author-name">MAHESH TANNEERU</div>
      <p>I am an enthusiastic Software Engineer and a good Human being :)</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/https://twitter.com/mtanneeru17" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://facebook.com/https://www.facebook.com/mahesh.tanneeru" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/tanneerumahesh" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/in/https://www.linkedin.com/in/mahesh-tanneeru/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="email"><a href="mailto:example.david@blog.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2019 &copy; MAHESH TANNEERU</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
    <script src="/js/lunr.js"></script>

<script>

var documents = [{
    "id": 0,
    "url": "/",
    "title": "",
    "body": "     TeamCity - Do not run a build while another build is in progress:   Problem I came across this issue in TeamCity today where as part of CI my. . .   2019, Oct 29&nbsp;&nbsp;&nbsp;—&nbsp;  1 minute read      Using MFA with aws cli to switch roles:   Problem If we have MFA(multi factor authentication) setup enabled on AWS console then we need. . .   2019, Oct 28&nbsp;&nbsp;&nbsp;—&nbsp;  1 minute read      Login to Azure AD using cypress:   Problem I have a requirement to automate azure ad login using cypress. Requirement is when. . .   2019, Oct 20&nbsp;&nbsp;&nbsp;—&nbsp;  4 minute read      Switch to different role using aws-cli:   If you ended up on this post you might be struggling to change the IAM. . .   2019, Oct 11&nbsp;&nbsp;&nbsp;—&nbsp;  2 minute read          Page 1 of 1       "
    }, {
    "id": 1,
    "url": "/tags/",
    "title": "Tags",
    "body": " Tags in Blog    TeamCity (1)   aws (2)   aws-cli (2)   azure (1)   cypress (1)   iam (2)   mac (2)   mfa (1)   office365 (1)   puppeteer (1)    TeamCity:         TeamCity - Do not run a build while another build is in progress    | 29 Oct 2019      aws:         Using MFA with aws cli to switch roles    | 28 Oct 2019          Switch to different role using aws-cli    | 11 Oct 2019      aws-cli:         Using MFA with aws cli to switch roles    | 28 Oct 2019          Switch to different role using aws-cli    | 11 Oct 2019      azure:         Login to Azure AD using cypress    | 20 Oct 2019      cypress:         Login to Azure AD using cypress    | 20 Oct 2019      iam:         Using MFA with aws cli to switch roles    | 28 Oct 2019          Switch to different role using aws-cli    | 11 Oct 2019      mac:         Using MFA with aws cli to switch roles    | 28 Oct 2019          Switch to different role using aws-cli    | 11 Oct 2019      mfa:         Using MFA with aws cli to switch roles    | 28 Oct 2019      office365:         Login to Azure AD using cypress    | 20 Oct 2019      puppeteer:         Login to Azure AD using cypress    | 20 Oct 2019     "
    }, {
    "id": 2,
    "url": "/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ &#8220;sitemap. xml&#8221;   absolute_url }}   "
    }, {
    "id": 3,
    "url": "/teamcity-do-not-run-build-while-another-build-in-progress/",
    "title": "TeamCity - Do not run a build while another build is in progress",
    "body": "2019/10/29 - Problem: I came across this issue in TeamCity today where as part of CI my automation tests are running against dev environment and sometimes tests are failing because deployment build triggered while test build is in progress. in this case my tests will fail because site will be down for few mins as part of deployment. So I need a way to tell TeamCity that do not run deployment build while automation test build is in progress. Solution: To solve this problem I need to configure builds in a way that one build should not run while other build is in progress. Apparently it’s not that straight forward in TC [at least for me!], I tried different ways but what worked for me is locking builds using shared resources. Below are the steps to configure this. 1. Create a shared resource at project level : Project -&gt; Shared Resources -&gt; Add a shared resource 2. Add a Resource name and select Resource with quota from resource type 3. Enter 1 in resource quota field 4. Save resource 5. Navigate to Deployment build configuration 6. Go to Build Features -&gt; Add build feature -&gt; Shared resources -&gt; Add Lock 7. Select resource name created above and select Write Lock in lock type 8. Save Lock 9. Repeat steps 5-8 for automation tests build DONE : only one of these builds will run at a time now. "
    }, {
    "id": 4,
    "url": "/aws-cli-mfa/",
    "title": "Using MFA with aws cli to switch roles",
    "body": "2019/10/28 - Problem: If we have MFA(multi factor authentication) setup enabled on AWS console then we need to generate temporary access/secret keys and session token with MFA to access aws services through aws cli. lets see how we can do it!. Solution:  Get MFA device arn from AWS console     Click on account name -&gt; click on My security credentials       Get device ARN from ‘Assigned MFA Device’ section in ‘Multi-factor authentication (MFA)’ section    Run below command to get temp credentials [by replacing arn and token code]  aws sts assume-role --role-arn {Role ARN} --role-session-name {Session name} --serial-number {MFA device ARN from above step} --token-code {token code}     Note: duration can be set between 900 and 129600 using –duration-seconds 129600 [this might vary based on role configuration. ]   Above command should output access/secret/session tokens which should look like below  {  Credentials : {    AccessKeyId :  ASIA56SNEE5Y3SEU4K6S ,    SecretAccessKey :  0R/eUqKTavYUKm6dMXiASQP5hwygaxJCi/FrfvXe ,    SessionToken :  FQoGZXIvYXdzEHcaDAwcmHZVDwstu1jUnCL1AYJJF8WY98Xw4vQ/bWvU5bfHqjtgp0ras2JSD9TBKdtdLjnMcSDweK4pwkMPVmKjSLBVqfh0t/p5WKJsKTvmhiEoUBiy7gzaBGfOC8Ue+XG+6SYt1N7etbYJ/5+F4xPFfns36dCAy1KULTD+7FH9/Wt4tHK5xetFSmD+jgf2z5H3uHhkR4khd7OAdN1mp+YOLoHZfYpV3FgdmOozFtXKi2YWg7IK+2BQj2N2A/2kaCizE29UMWAEVZhO/8tE4kf/q/XrvWt1+SAb/7nZRUhw1Qu5vfpvEzvkMOfYSE0YNZbs/5Cy4MXZ5A9g00OpHcytAOZ8Sga1KL65nO0F ,    Expiration :  2019-10-16T14:35:58Z  },  AssumedRoleUser : {    AssumedRoleId :  FRESCVHHNBGFFF45FRS:testRole ,    Arn :  arn:aws:sts::65764765765:assumed-role/AccessToTestDev/testRole  } }       Use access and secret keys from above step to connect to AWS resources     Note: keep in mind that there is an expiration for session token so when token expired we need to refresh the token again   "
    }, {
    "id": 5,
    "url": "/cypress-azureAD-login/",
    "title": "Login to Azure AD using cypress",
    "body": "2019/10/20 - Problem: I have a requirement to automate azure ad login using cypress. Requirement is when user navigated to site-P it will redirect to azure AD login page where user has to enter login details and they will get redirected to site-P once login is successful. By design cypress doesn’t allow this because of many reasons as described here. I am not going to discuss good and bad about this here [as it’s a vast topic on its own!] but can show you how I managed to workaround this problem. Solution: Approach: After completing login process user will be redirected to my site and there will be couple of cookies added to site at this point [this might be different for different sites!], which will be used for any further authentication on site. So if I can get those cookies and add it to browser before starting cypress tests all should work [in theory] How to do it ?: Use puppeteer to complete the Azure login and extract cookies. [i am using puppeteer because it looks simple to me but any ui automation tool should do it] 1. Install puppeteer using npm install puppeteer. 2. Create a GetCookies. js file in support folder. 3. Add below code to GetCookies. js which will login to Azure and extract cookies to cookies. json file. const puppeteer = require( puppeteer ); const test_file = require( fs ); puppeteer . launch({headless: true, chromeWebSecurity: false, args: ['--no-sandbox'] }). then(async browser =&gt; {   const page = await browser. newPage();   await page. goto( {site-url );   await page. waitFor(2000);   await page. waitForSelector('input[name=loginfmt]');   await page. type( input[name=loginfmt] ,  test123 , {applyDelay: 50 });   await page. waitForSelector( input[type=submit] );   await page. click( input[type=submit] );   await page. waitFor(2000);   await page. waitForSelector( input[name=passwd] );   await page. click( input[name=passwd] );   await page. type( input[name=passwd] ,  test123 , {applyDelay: 50});   await page. waitForSelector( input[type=submit] );   await page. click( input[type=submit] );   await page. waitFor(2000);   await page. click( input[type=submit] );   await page. waitFor(2000);   await page. waitForSelector( h3 )   const cookiesFromPage = await page. cookies();    let cookies = [];    for (let cookie of cookiesFromPage) {     let coo = {};     coo. name = cookie. name;     coo. value = cookie. value;     coo. domain = cookie. domain;     coo. path = cookie. path;     coo. expires = cookie. expires;     coo. size = cookie. size;     coo. httpOnly = cookie. httpOnly;     cookies. push(coo);    }   test_file. writeFileSync(  cookies. json , JSON. stringify(cookies));   browser. close();  }); function applyDelay(time) { return new Promise(function (resolve) {setTimeout(resolve, time);}); } 4. We need to add cookies to browser before starting cypress tests, add below function to support/commands. js which will add cookies to browser. Cypress. Commands. add( loadCookies , () =&gt; {  cy. clearLocalStorage(); return cy. fixture( cookies. json ). then(data =&gt; {   for (let cookie of data) {    cy. setCookie(cookie. name, cookie. value, {    domain: cookie. domain,     path: cookie. path,     expiry: cookie. expires,     httpOnly: cookie. httpOnly    });   }  }); }); 5. Call load cookies command in beforeEach so that cookies will be loaded before test. describe('Azure login', () =&gt; {  beforeEach(() =&gt; {   cy. loadCookies();   cy. visit('/');  });  it('Test Home page', () =&gt; {    // this should work!   }); 6. Finally we have to make sure that puppeteer script runs before starting cypress tests. Add below scripts to package. json to run puppeteer and cypress in sequential order  scripts : {  get-cookies :  node cypress/support/getCookies. js &amp;&amp; mv cookies. json cypress/fixtures , runTests :  npm run get-cookies &amp;&amp; cypress run }7. Now run npm run runTests [if you are lucky everything will work :)] "
    }, {
    "id": 6,
    "url": "/aws-cli-switch-role/",
    "title": "Switch to different role using aws-cli",
    "body": "2019/10/11 - If you ended up on this post you might be struggling to change the IAM role using aws-cli(for any reason) and found this post! i might be able to help here as i had same frustration some time back :) Problem: From aws console i can login to my account and i can switch role to dev to access aws resources related to dev environment, all looks good here. Now i want to access dev resources from my local as i need to run my tests against dev resources, as usual i ran the tests with my default credentials (configured using aws-cli) and they fail straight away with error no access to resource, this is because my default role will not have access to dev resources. ok i now know the problem and the solution is simple change roles, BUT its not that simple as i tried 10 different ways to change role to dev. Below is the solution worked for me. Solution:    Open credentials file ~/. aws/credentials     It should already have default profile section with access/secret keys [if not use aws configure to configure secrets]     Add AssumeRole section and a dev profile section in credentials file   [default] aws_access_key_id = abc123 aws_secret_access_key = abc123 [dev]       // new profile but credentials are same as default  aws_access_key_id = abc123 aws_secret_access_key = abc123 [AssumeRole]          // new section role_arn = arn:aws:iam::1235634:role/dev-arm  source_profile = dev      Open config file ~/. aws/config     Add dev profile to config file   [default] region = eu-west-1   [profile dev] // this is new profile region = eu-west-1       Run a sample command like aws iam list-users --profile dev. if your configuration is correct and you are lucky you will see users listed and you can connect to resources in dev role.   Remember you have to run all commands with --profile dev to tell aws-cli to use the role. if you don’t want to use it always [WHICH I DON’T PREFER as you might mess with dev resources like i do!] you can run export AWS_DEFAULT_PROFILE=dev. now you can run commands like aws iam list-users with out --profile dev"
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});
function lunr_search(term) {
    document.getElementById('lunrsearchresults').innerHTML = '<ul></ul>';
    if(term) {
        document.getElementById('lunrsearchresults').innerHTML = "<p>Search results for '" + term + "'</p>" + document.getElementById('lunrsearchresults').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>No results found...</li>";
        }
    }
    return false;
}
</script>
<style>
    #lunrsearchresults {padding-top: 0.2rem;}
    .lunrsearchresult {padding-bottom: 1rem;}
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>


<form onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <p><input type="text" class="form-control" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Search Articles" style="border-color: #53a7e8;" /></p>
</form>
<div id="lunrsearchresults">
    <ul></ul>
</div>
  


<section class="blog-tags">
  <h1>Tags in Blog</h1>
  <ul class="tags">
<!--  cycles through tag list and creates header row of all tags used in site with accompanying per-tag counts...-->
  
    <li ><a href="#TeamCity" class="tag">TeamCity <span>(1)</span></a></li>
  
    <li ><a href="#aws" class="tag">aws <span>(2)</span></a></li>
  
    <li ><a href="#aws-cli" class="tag">aws-cli <span>(2)</span></a></li>
  
    <li ><a href="#azure" class="tag">azure <span>(1)</span></a></li>
  
    <li ><a href="#cypress" class="tag">cypress <span>(1)</span></a></li>
  
    <li ><a href="#iam" class="tag">iam <span>(2)</span></a></li>
  
    <li ><a href="#mac" class="tag">mac <span>(2)</span></a></li>
  
    <li ><a href="#mfa" class="tag">mfa <span>(1)</span></a></li>
  
    <li ><a href="#office365" class="tag">office365 <span>(1)</span></a></li>
  
    <li ><a href="#puppeteer" class="tag">puppeteer <span>(1)</span></a></li>
  
  </ul>
<!--cycles through tag list and creates subheader for each tag name...-->
  
  <h2 id="TeamCity">TeamCity</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/teamcity-do-not-run-build-while-another-build-in-progress/">TeamCity - Do not run a build while another build is in progress</a></span>
        <small><span>| 29 Oct 2019</span></small>
    </div>
    
  
  <h2 id="aws">aws</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/aws-cli-mfa/">Using MFA with aws cli to switch roles</a></span>
        <small><span>| 28 Oct 2019</span></small>
    </div>
    
    <div class="tag-list">
        <span><a href="/aws-cli-switch-role/">Switch to different role using aws-cli</a></span>
        <small><span>| 11 Oct 2019</span></small>
    </div>
    
  
  <h2 id="aws-cli">aws-cli</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/aws-cli-mfa/">Using MFA with aws cli to switch roles</a></span>
        <small><span>| 28 Oct 2019</span></small>
    </div>
    
    <div class="tag-list">
        <span><a href="/aws-cli-switch-role/">Switch to different role using aws-cli</a></span>
        <small><span>| 11 Oct 2019</span></small>
    </div>
    
  
  <h2 id="azure">azure</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/cypress-azureAD-login/">Login to Azure AD using cypress</a></span>
        <small><span>| 20 Oct 2019</span></small>
    </div>
    
  
  <h2 id="cypress">cypress</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/cypress-azureAD-login/">Login to Azure AD using cypress</a></span>
        <small><span>| 20 Oct 2019</span></small>
    </div>
    
  
  <h2 id="iam">iam</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/aws-cli-mfa/">Using MFA with aws cli to switch roles</a></span>
        <small><span>| 28 Oct 2019</span></small>
    </div>
    
    <div class="tag-list">
        <span><a href="/aws-cli-switch-role/">Switch to different role using aws-cli</a></span>
        <small><span>| 11 Oct 2019</span></small>
    </div>
    
  
  <h2 id="mac">mac</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/aws-cli-mfa/">Using MFA with aws cli to switch roles</a></span>
        <small><span>| 28 Oct 2019</span></small>
    </div>
    
    <div class="tag-list">
        <span><a href="/aws-cli-switch-role/">Switch to different role using aws-cli</a></span>
        <small><span>| 11 Oct 2019</span></small>
    </div>
    
  
  <h2 id="mfa">mfa</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/aws-cli-mfa/">Using MFA with aws cli to switch roles</a></span>
        <small><span>| 28 Oct 2019</span></small>
    </div>
    
  
  <h2 id="office365">office365</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/cypress-azureAD-login/">Login to Azure AD using cypress</a></span>
        <small><span>| 20 Oct 2019</span></small>
    </div>
    
  
  <h2 id="puppeteer">puppeteer</h2>
<!--  lists all posts corresponding to specific tag...-->
    
    <div class="tag-list">
        <span><a href="/cypress-azureAD-login/">Login to Azure AD using cypress</a></span>
        <small><span>| 20 Oct 2019</span></small>
    </div>
    
  
</section>

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
