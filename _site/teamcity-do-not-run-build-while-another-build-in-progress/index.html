<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>TeamCity - Do not run a build while another build is in progress - Mahesh's Tech Helpers</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Mahesh's Tech Helpers" property="og:site_name">
  
    <meta content="TeamCity - Do not run a build while another build is in progress" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="TeamCity - Do not run a build while another build is in progress." property="og:description">
  
  
    <meta content="/teamcity-do-not-run-build-while-another-build-in-progress/" property="og:url">
  
  
    <meta content="2019-10-29T09:38:20+00:00" property="article:published_time">
    <meta content="/about/" property="article:author">
  
  
    <meta content="/assets/img/mahesh.jpg" property="og:image">
  
  
    
  
  
    
    <meta content="TeamCity" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@https://twitter.com/mtanneeru17">
  
    <meta name="twitter:title" content="TeamCity - Do not run a build while another build is in progress">
  
  
    <meta name="twitter:url" content="/teamcity-do-not-run-build-while-another-build-in-progress/">
  
  
    <meta name="twitter:description" content="TeamCity - Do not run a build while another build is in progress.">
  
  
    <meta name="twitter:image:src" content="/assets/img/mahesh.jpg">
  

	<meta name="description" content="TeamCity - Do not run a build while another build is in progress.">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/favicon1.png ">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/favicon2.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/favicon2.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
  <link rel="stylesheet" href="/assets/css/main.css">
  
   
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/mahesh.jpg" alt="MAHESH TANNEERU"></a>
      </div>
      <div class="author-name">MAHESH TANNEERU</div>
      <p>I am an enthusiastic Software Engineer and a good Human being :)</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/https://twitter.com/mtanneeru17" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://facebook.com/https://www.facebook.com/mahesh.tanneeru" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/tanneerumahesh" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/in/https://www.linkedin.com/in/mahesh-tanneeru/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="email"><a href="mailto:example.david@blog.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2019 &copy; MAHESH TANNEERU</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">TeamCity - Do not run a build while another build is in progress</h1>
        <div class="page-date"><span>2019, Oct 29&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <h3 id="problem">Problem</h3>
<p>I came across this issue in TeamCity today where as part of CI my automation tests are running against dev environment and sometimes tests are failing because deployment build triggered while test build is in progress. in this case my tests will fail because site will be down for few mins as part of deployment. So I need a way to tell TeamCity that do not run deployment build while automation test build is in progress.</p>

<h3 id="solution">Solution</h3>
<p>To solve this problem I need to configure builds in a way that one build should not run while other build is in progress. Apparently itâ€™s not that straight forward in TC [at least for me!], I tried different ways but what worked for me is locking builds using shared resources. Below are the steps to configure this.</p>

<p>1.Create a shared resource at project level : <strong>Project -&gt; Shared Resources -&gt; Add a shared resource</strong></p>

<p>2.Add a Resource name and select <strong>Resource with quota</strong> from resource type</p>

<p>3.Enter 1 in resource quota field</p>

<p>4.Save resource</p>

<p><img src="/assets/img/tc-save-resource.png" alt="alt text" /></p>

<p>5.Navigate to Deployment build configuration</p>

<p>6.Go to Build <strong>Features -&gt; Add build feature -&gt; Shared resources -&gt; Add Lock</strong></p>

<p>7.Select resource name created above and select <strong>Write Lock</strong> in lock type</p>

<p>8.Save Lock</p>

<p><img src="/assets/img/tc-save-lock.png" alt="alt text" /></p>

<p>9.Repeat steps 5-8 for automation tests build</p>

<p>DONE :  only one of these builds will run at a time now.</p>


      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=TeamCity - Do not run a build while another build is in progress&url=/teamcity-do-not-run-build-while-another-build-in-progress/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=/teamcity-do-not-run-build-while-another-build-in-progress/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=/teamcity-do-not-run-build-while-another-build-in-progress/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#TeamCity" class="tag">&#35; TeamCity</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
